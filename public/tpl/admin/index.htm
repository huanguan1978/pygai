% include('header.tpl', pageTitle=pageTitle)
% include('admin/header.tpl')

<h3>
  Wellcome {{name}}
</h3>

<p>
  <button id="liveToastBtn" class="btn btn-primary " data-bs-toggle="toast" data-bs-target=".toast">Show JsonWebToken</button>
</p>

<div id="liveToast" class="toast w-75" role="alert" aria-live="assertive" aria-atomic="true" data-bs-autohide="false">
  <div class="toast-header">
    <strong class="me-auto">MyJsonWebToken</strong>
    <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
  </div>
  <div class="toast-body">
    <p id="copiable-text">{{jwt}}</p>
    <button class="btn btn-secondary" onclick="copyText()">Copy</button>
  </div>
</div>

<script type="text/javascript">
  function copyText() {
    var text = document.getElementById("copiable-text").textContent;
    navigator.clipboard.writeText(text).then(function() {
      console.log("Text copied to clipboard");
    });
  }

  // var toast = new bootstrap.Toast(document.querySelector('.toast'));
  // toast.show();

  var toastTrigger = document.getElementById('liveToastBtn')
  var toastLiveExample = document.getElementById('liveToast')
  if (toastTrigger) {
    toastTrigger.addEventListener('click', function () {
      var toast = new bootstrap.Toast(toastLiveExample)
      toast.show()
    })
  }

</script>

% include('footer.tpl')
